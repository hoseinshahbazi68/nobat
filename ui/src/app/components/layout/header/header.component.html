<header class="header-toolbar">
  <div class="header-left">
    <button *ngIf="isMobile" class="menu-button" (click)="toggleSidenav.emit()" aria-label="Ù…Ù†Ùˆ">
      <span class="icon">â˜°</span>
    </button>
    <div class="breadcrumb">
      <span class="breadcrumb-text">{{ getCurrentPageTitle() }}</span>
    </div>
  </div>
  <span class="spacer"></span>
  <div class="header-right">
    <button class="notification-button" title="Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù‡ Ù†Ø´Ø¯Ù‡" (click)="navigateToChatSupport()">
      <span class="icon">ğŸ’¬</span>
      <span class="notification-badge" *ngIf="unansweredChatCount > 0">{{ unansweredChatCount > 99 ? '99+' : unansweredChatCount }}</span>
    </button>
    <div class="user-menu-container">
      <button class="user-menu-button" (click)="toggleUserMenu()">
        <div class="user-avatar" [class.has-image]="true">
          <img [src]="getProfilePictureUrl()" alt="Profile Picture" class="avatar-image" (error)="onImageError($event)">
        </div>
        <span class="dropdown-icon">â–¼</span>
      </button>
      <div class="user-menu" *ngIf="userMenuOpen" (click)="$event.stopPropagation()">
        <div class="menu-header">
          <div class="menu-avatar" [class.has-image]="true">
            <img [src]="getProfilePictureUrl()" alt="Profile Picture" class="menu-avatar-image" (error)="onImageError($event)">
          </div>
          <div class="menu-user-info">
            <span class="menu-username">{{ username }}</span>
            <span class="menu-user-role">Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…</span>
          </div>
        </div>
        <div class="menu-divider"></div>
        <button class="menu-item" (click)="openChangePasswordDialog()">
          <span class="icon">ğŸ”’</span>
          <span>ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</span>
        </button>
        <button class="menu-item" (click)="goToProfile(); closeUserMenu()">
          <span class="icon">ğŸ‘¨â€ğŸ’¼</span>
          <span>Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ù†</span>
        </button>
        <div class="menu-divider"></div>
        <button class="menu-item logout-item" (click)="logout(); closeUserMenu()">
          <span class="icon">ğŸšª</span>
          <span>Ø®Ø±ÙˆØ¬</span>
        </button>
      </div>
    </div>
  </div>
  <div class="menu-overlay" *ngIf="userMenuOpen" (click)="closeUserMenu()"></div>
</header>
