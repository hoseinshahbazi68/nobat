<div class="page-container">
  <div class="page-header">
    <h1>Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h1>
    <button class="btn btn-primary" (click)="openAddDialog()" [disabled]="isLoading">
      <span class="icon">+</span>
      Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
    </button>
  </div>

  <div class="table-card">
    <div class="table-header">
      <div class="search-container">
        <div class="search-field">
          <input type="text" [(ngModel)]="filterValue" (keyup.enter)="applyFilter()" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ú©Ø§Ø±Ø¨Ø±Ø§Ù†"
            [disabled]="isLoading">
        </div>
        <button class="btn-search" (click)="applyFilter()" [disabled]="isLoading" title="Ø¬Ø³ØªØ¬Ùˆ">
          <span class="search-icon">ğŸ”</span>
        </button>
      </div>
    </div>

    <div class="table-container" [class.table-loading-overlay]="isLoading">
      <app-loading *ngIf="isLoading" [overlay]="true" message="Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†..."></app-loading>
      <table class="data-table" [style.opacity]="isLoading ? '0.5' : '1'">
        <thead>
          <tr>
            <th>Ø´Ù†Ø§Ø³Ù‡</th>
            <th>Ú©Ø¯ Ù…Ù„ÛŒ</th>
            <th>Ø§ÛŒÙ…ÛŒÙ„</th>
            <th>Ù†Ø§Ù… Ú©Ø§Ù…Ù„</th>
            <th>Ø¬Ù†Ø³ÛŒØª</th>
            <th>ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯</th>
            <th>Ø´Ù‡Ø±</th>
            <th>Ù†Ù‚Ø´</th>
            <th>ÙˆØ¶Ø¹ÛŒØª</th>
            <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of filteredUsers">
            <td>{{ user.id || '-' }}</td>
            <td>{{ user.nationalCode }}</td>
            <td>{{ user.email }}</td>
            <td>{{ getFullName(user) }}</td>
            <td>{{ getGenderText(user.gender) }}</td>
            <td>{{ user.birthDate ? (user.birthDate | date:'yyyy/MM/dd') : '-' }}</td>
            <td>{{ user.cityName || '-' }}</td>
            <td>{{ getRoles(user) }}</td>
            <td>
              <span class="status-badge" [class.active]="user.isActive" [class.inactive]="!user.isActive">
                {{ user.isActive ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ±ÙØ¹Ø§Ù„' }}
              </span>
            </td>
            <td>
              <div class="action-buttons">
                <button class="btn-icon btn-menu" (click)="openActionsMenu($event, user)" title="Ù…Ù†Ùˆ" [disabled]="isLoading">
                  â‹®
                </button>
              </div>
            </td>
          </tr>
          <tr *ngIf="filteredUsers.length === 0 && !isLoading">
            <td colspan="10" class="no-data">Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</td>
          </tr>
        </tbody>
      </table>
    </div>

    <app-pagination [currentPage]="currentPage" [totalPages]="totalPages" [totalCount]="totalCount"
      [pageSize]="pageSize" (pageChange)="onPageChange($event)" (pageSizeChange)="onPageSizeChange($event)">
    </app-pagination>
  </div>
</div>
