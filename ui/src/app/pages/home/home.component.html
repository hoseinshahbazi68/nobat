<div class="home-container">
  <!-- Chat Button -->
  <button class="chat-button" (click)="openChat()" aria-label="ุจุงุฒ ฺฉุฑุฏู ฺุช ุขููุงู">
    <span class="chat-icon">๐ฌ</span>
    <span class="chat-badge" *ngIf="false">1</span>
  </button>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-background">
      <div class="medical-icons">
        <div class="medical-icon">๐ฉบ</div>
        <div class="medical-icon">๐</div>
        <div class="medical-icon">๐งช</div>
        <div class="medical-icon">๐</div>
      </div>
    </div>
    
    <div class="hero-content-wrapper">
      <h1 class="hero-title">ููุจุช ุฏู ุขููุงู</h1>
      <p class="hero-subtitle">ููุจุช ุฏู ุงูุชุฑูุช ู ูุดุงูุฑู ุขููุงู ูพุฒุดฺฉุงู ุงุฑุงู</p>
      
      <!-- Search Bar -->
      <div class="search-bar-container">
        <div class="search-input-wrapper">
          <input 
            type="text" 
            class="search-input" 
            placeholder="ูุงู ูพุฒุดฺฉุ ุชุฎุตุตุ ุจูุงุฑุ ูุฑฺฉุฒ ุฏุฑูุงูุ ุฎุฏูุช ู..."
            [(ngModel)]="searchQuery"
            (keyup.enter)="goToDoctorList()"
          />
          <span class="search-icon">๐</span>
        </div>
        <div class="city-selector-wrapper">
          <button class="city-selector" (click)="toggleProvinceDropdown(); $event.stopPropagation()">
            <span class="location-icon">๐</span>
            <span class="city-text">
              <span *ngIf="selectedCityId">{{ getSelectedCityName() }}</span>
              <span *ngIf="!selectedCityId">{{ getSelectedProvinceName() }}</span>
            </span>
            <span class="dropdown-arrow" [class.open]="provinceDropdownOpen || cityDropdownOpen">โผ</span>
          </button>
        </div>

        <!-- Modal Overlay -->
        <div class="location-modal-overlay" 
             *ngIf="provinceDropdownOpen"
             (click)="closeLocationModal()">
        </div>

        <!-- Location Modal with Grouped Cities -->
        <div class="location-modal" 
             *ngIf="provinceDropdownOpen"
             [class.open]="provinceDropdownOpen"
             (click)="$event.stopPropagation()">
          <div class="modal-header">
            <h3 class="modal-title">ุงูุชุฎุงุจ ุดูุฑ</h3>
            <button class="modal-close" (click)="closeProvinceModal()">โ</button>
          </div>
          <div class="modal-content">
            <div class="modal-search-wrapper">
              <input 
                type="text" 
                class="modal-search" 
                placeholder="ุฌุณุชุฌู ุดูุฑ ุง ุงุณุชุงู..."
                [(ngModel)]="citySearchQuery"
                (click)="$event.stopPropagation()"
              />
              <span class="search-icon">๐</span>
            </div>
            <div class="modal-options" *ngIf="!isLoadingCities">
              <a class="all-cities-link" (click)="selectCity(null); $event.stopPropagation()">
                ููู ุดูุฑูุง
              </a>
              <div *ngFor="let group of getGroupedCities()" class="city-group">
                <div class="city-group-header">{{ group.province.name }}</div>
                <button 
                  *ngFor="let city of group.cities" 
                  class="modal-option city-option-item"
                  [class.selected]="selectedCityId === city.id"
                  (click)="selectCity(city.id!); $event.stopPropagation()"
                >
                  {{ city.name }}
                </button>
              </div>
              <div class="modal-options-empty" *ngIf="getGroupedCities().length === 0">
                ูุชุฌูโุง ุงูุช ูุดุฏ
              </div>
            </div>
            <div class="modal-loading" *ngIf="isLoadingCities">
              ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...
            </div>
          </div>
        </div>
      </div>

      <!-- Stats -->
      <div class="hero-stats">
        <div class="stat-card">
          <span class="stat-number">+{{ doctors.length.toLocaleString('fa-IR') }}</span>
          <span class="stat-label">ูพุฒุดฺฉ</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">+{{ (doctors.length * 350).toLocaleString('fa-IR') }}</span>
          <span class="stat-label">ููุจุช ูููู</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">+{{ (cities.length > 0 ? cities.length : availableCities.length).toLocaleString('fa-IR') }}</span>
          <span class="stat-label">ุดูุฑ ู ุฑูุณุชุง</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Service Cards -->
  <section class="services-section">
    <div class="services-grid">
      <div class="service-card" (click)="goToDoctorList()">
        <div class="service-icon">๐ฅ</div>
        <h3 class="service-title">ููุจุช ุฏู ูุทุจ</h3>
        <p class="service-description">ุฑุฒุฑู ููุจุช ุงุฒ ุจูุชุฑู ูพุฒุดฺฉุงู</p>
      </div>
      
      <div class="service-card">
        <div class="service-icon">๐ฌ</div>
        <h3 class="service-title">ูุดุงูุฑู ุขููุงู</h3>
        <p class="service-description">ูุดุงูุฑู ูพุฒุดฺฉ ุขููุงู</p>
        <span class="service-badge">โ</span>
      </div>
      
      <div class="service-card">
        <div class="service-icon">๐ข</div>
        <h3 class="service-title">ูุฑุงฺฉุฒ ุฏุฑูุงู</h3>
        <p class="service-description">ููุจุช ุงุฒ ูุฑุงฺฉุฒ ุฏุฑูุงู</p>
      </div>
      
      <div class="service-card">
        <div class="service-icon">๐งช</div>
        <h3 class="service-title">ูพุฐุฑุด ุขููุงู ุขุฒูุงุดฺฏุงู</h3>
        <p class="service-description">ุฑุฒุฑู ุขุฒูุงุดฺฏุงู</p>
        <span class="service-badge new">ุฌุฏุฏ</span>
      </div>
      
      <div class="service-card">
        <div class="service-icon">๐ฐ</div>
        <h3 class="service-title">ูุฌูู ุณูุงูุช</h3>
        <p class="service-description">ููุงูุงุช ู ุงุฎุจุงุฑ ุณูุงูุช</p>
      </div>
    </div>
  </section>
</div>
